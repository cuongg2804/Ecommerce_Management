extends ../../layouts/default.pug
include ../../mixin/pagination.pug
include ../../mixin/form-search.pug

block main
  .row
    .col-12
      .card
        .card-header
          .row.align-items-center
            .col
              h4.card-title #{pageTitle}
            // end col
            .col-auto
              a.btn.btn-primary(
                href=`/${pathAdmin}/article/create`
                )
                i.fa-solid.fa-plus.me-1
                | Tạo bài viết
                // end col
            // end col
          // end row
        // end card-header
        .card-body.pt-0
          .row
            .col-lg-6
              +form-search()
          .table-responsive
            table.table.table-striped.mb-0
              thead.table-light
                tr
                  th STT
                  th Avatar
                  th Tên bài viết
                  th Trạng thái
                  th Lượt xem
                  th.text-end Hành động
              tbody
                if(articleList.length > 0)
                  each item, index in articleList
                    tr
                      td #{pagination.skip + index + 1}
                      td
                        if(item.avatar)
                          img(
                            src=`${domainCDN}${item.avatar}`
                            class="rounded thumb-md me-1 d-inline"
                          )
                      td #{item.name}
                      td
                        if (item.status == "draft")
                          span(class="badge bg-dark") Bản nháp
                        else if (item.status == "published")
                          span(class="badge bg-success") Đã xuất bản
                        else if (item.status == "archived")
                          span(class="badge bg-danger") Đã lưu trữ
                      td #{item.view}
                      td.text-end
                        a(href=`${prefixAdmin}/article/edit/${item.id}`)
                          i.las.la-pen.text-secondary.font-16
                        a(
                          href="javascript:;"
                          button-api
                          method="DELETE"
                          data-api=`${prefixAdmin}/article/delete/${item.id}`
                        )
                          i.las.la-trash-alt.text-secondary.font-16
                else
                      tr
                          td(colspan="6" class="text-center") Không có dữ liệu
          +pagination(pagination)
    // end col


